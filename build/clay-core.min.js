/*!
* clay.js - Provide more flexible data visualization solutions!
* git+https://github.com/yelloxing/clay-core.git
* 
* author 心叶
*
* version 1.6.0next
* 
* build Sun Jul 29 2018
*
* Copyright yelloxing
* Released under the MIT license
* 
* Date:Fri Dec 28 2018 20:59:18 GMT+0800 (中国标准时间)
*/

!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=function(t){return e(t||window)}:t.clay=t.$$=e(t)}("undefined"!=typeof window?window:this,function(e,f){"use strict";var m=function(t,e){return new m.prototype.init(t,e)};m.prototype.init=function(t,e){this.context=e=e||document;var r,n=a(t,e);for(r=0;r<n.length;r++)this[r]=n[r];return this.selector=t,this.length=n.length,this},m.prototype.init.prototype=m.prototype;var y,u={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},x={whitespace:"[\\x20\\t\\r\\n\\f]",identifier:"(?:\\\\.|[\\w-]|[^\0-\\xa0])+"},i=["href","title","show","type","role","actuate"],o={};function a(t,e){var r,n=[];if("string"==typeof t){if(t=(t+"").trim().replace(/[\n\f\r]/g,""),/^</.test(t))return[b(t)];if("function"==typeof y)return y(t,e);if("*"===t)return e.getElementsByTagName("*");var i=x.whitespace,o=x.identifier,u="\\["+i+"{0,}"+o+"(?:"+i+"{0,}="+i+"{0,}(\\'|\\\"){0,1}"+o+"\\1{0,1}){0,1}"+i+"{0,}\\]";if(new RegExp("^(?:"+o+"){0,1}(?:(?:#|\\.)"+o+"|"+u+"){0,}$").test(t)){var a,c=t.match(new RegExp("#"+o,"g")),s=t.match(new RegExp("\\."+o,"g")),f=t.match(new RegExp("^"+o)),h=t.match(new RegExp(u,"g"));if(c){if(1<c.length)return[];a=(a=document.getElementById((c.shift(0)+"").replace(/^#/,"")))?[a]:[]}else a=e.getElementsByClassName&&s?e.getElementsByClassName((s.shift(0)+"").replace(/^\./,"")):f?e.getElementsByTagName(f.shift(0)):e.getElementsByTagName("*");var p,l,d,g,v=new RegExp("^\\["+i+"{0,}("+o+")(?:"+i+"{0,}="+i+"{0,}(?:\\'|\\\"){0,1}("+o+")(?:\\'|\\\"){0,1}){0,1}"+i+"{0,}\\]$");for(r=0;r<a.length;r++)if(g=!0,!(f&&0<f.length&&(f[0]+"").toUpperCase()!==(a[r].tagName+"").toUpperCase())){for(p=" "+a[r].getAttribute("class")+" ",l=0;g&&s&&l<s.length;l++)if(p.search(" "+(s[l]+"").replace(/\./,"")+" ")<0){g=!1;break}for(l=0;g&&h&&l<h.length;l++)if(p=v.exec(h[l]),null===(d=a[r].getAttribute(p[1]))||p[2]&&d!=p[2]){g=!1;break}g&&n.push(a[r])}return n}throw new Error("Unsupported selector!")}if(!t||1!==t.nodeType&&11!==t.nodeType&&9!==t.nodeType){if(!t||t.constructor!==Array&&t.constructor!==HTMLCollection&&t.constructor!==NodeList){if(t&&t.constructor===m)return t;if(t)throw new Error("Unsupported parameter!");return[]}for(r=0;r<t.length;r++)!t[r]||1!==t[r].nodeType&&11!==t[r].nodeType&&9!==t[r].nodeType||n.push(t[r]);return n}return[t]}function b(t){var e=document.createElementNS(u.svg,"svg");new RegExp("^"+x.identifier+"$").test(t)&&(t="<"+t+"></"+t+">"),e.innerHTML=t;var r,n,i=e.childNodes;for(r=0;r<i.length;r++)if(1===i[r].nodeType||9===i[r].nodeType||11===i[r].nodeType){n=i[r];break}if(!n||"canvas"==n.tagName||/[A-Z]/.test(n.tagName))for((e=document.createElement("div")).innerHTML=t,i=e.childNodes,r=0;r<i.length;r++)if(1===i[r].nodeType||9===i[r].nodeType||11===i[r].nodeType){n=i[r];break}return n}o.$sizzleProvider=function(t){y=t},m.prototype.find=function(t){if(this.length<=0)return m();var e,r=m(),n=a(t,this[0]);for(r.selector=t,e=0;e<n.length;e++)r[e]=n[e],r.length+=1;return r},m.prototype.eq=function(t){return this.length<=t?new m:new m(this[t])},m.prototype.appendTo=function(t){var e,r,n=m(t);for(e=0;e<n.length;e++)for(r=0;r<this.length;r++)n[e].appendChild(this[r]);return this},m.prototype.remove=function(){var t;for(t=0;t<this.length;t++)this[t].parentNode.removeChild(this[t]);return this},m.prototype.refresh=function(){var t,e=a(this.selector,this.context),r=this.length;for(t=this.length=0;t<e.length;t++)this[t]=e[t],this.length+=1;for(;t<r;t++)delete this[t];return this},m.prototype.attr=function(t,e){if(null==e||e==f)return 0<this.length?this[0].getAttribute(t):f;var r,n;for(r=0;r<this.length;r++)n="function"==typeof e?e(this[r]._data,r,this.eq(r)):e,/[A-Z]/.test(this[r].tagName)&&0<=i.indexOf(t)?this[r].setAttributeNS(u.xlink,"xlink:"+t,n):this[r].setAttribute(t,n);return this},m.prototype.css=function(t,e){if(arguments.length<=1&&"object"!=typeof t){if(this.length<1)return f;var r=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(this[0],null):this[0].currentStyle;return"string"==typeof t?r.getPropertyValue(t):r}var n,i;if(0<this.length)if("object"==typeof t)for(i in t)for(n=0;n<this.length;n++)this[n].style[i]="function"==typeof e?e(this[n]._data,n,i,t[i]):t[i];else for(n=0;n<this.length;n++)this[n].style[t]="function"==typeof e?e(this[n]._data,n):e;return this},m.prototype.size=function(t){var e,r;return"content"==(t=t||"border")?(r=this[0].clientWidth-(this.css("padding-left")+"").replace("px","")-(this.css("padding-right")+"").replace("px",""),e=this[0].clientHeight-(this.css("padding-top")+"").replace("px","")-(this.css("padding-bottom")+"").replace("px","")):"padding"==t?(r=this[0].clientWidth,e=this[0].clientHeight):"border"==t?(r=this[0].offsetWidth,e=this[0].offsetHeight):"scroll"==t&&(r=this[0].scrollWidth,e=this[0].scrollHeight),{width:r,height:e}},m.prototype.datum=function(t,e){if(null===t||t===f)return 0<this.length?this[0]._data:f;var r;for(r=0;r<this.length;r++)t="function"==typeof e?e(t,r):t,this[r]._data=t;return this},m.prototype.data=function(t,e){var r,n=[];if(t&&t.constructor===Array){var i=m();for(i.selector=this.selector,r=0;r<t.length&&r<this.length;r++)this[r]._data="function"==typeof e?e(t[r],r):t[r],i[r]=this[r],i.length+=1;for(i._enter=[];r<t.length;r++)i._enter.push("function"==typeof e?e(t[r],r):t[r]);for(i._exit=[];r<this.length;r++)i._exit.push(this[r]);return i}for(r=0;r<this.length;r++)n[r]=this[r]._data;return n},m.prototype.enter=function(t){var e,r,n=m();for(n.selector=this.selector,e=0;this._enter&&e<this._enter.length;e++)(r=b(t))._data=this._enter[e],n[e]=r,n.length+=1;return delete this._enter,n},m.prototype.exit=function(){var t,e=m();for(e.selector=this.selector,t=0;this._exit&&t<this._exit.length;t++)e[t]=this._exit[t],e.length+=1;return delete this._exit,e},m.prototype.bind=function(t,e){var r;if(window.attachEvent)for(r=0;r<this.length;r++)this[r].attachEvent("on"+t,e);else for(r=0;r<this.length;r++)this[r].addEventListener(t,e,!1);return this},m.prototype.trigger=function(t){var e,r;if(document.createEventObject)for(r=document.createEventObject(),e=0;e<this.length;e++)this[e].fireEvent("on"+t,r);else for((r=document.createEvent("HTMLEvents")).initEvent(t,!0,!1),e=0;e<this.length;e++)this[e].dispatchEvent(r);return this},m.prototype.position=function(t){var e=this[0].getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}};var t,s=-1<(t=e.navigator.userAgent).indexOf("Opera")||-1<t.indexOf("OPR")?"Opera":-1<t.indexOf("compatible")&&-1<t.indexOf("MSIE")||-1<t.indexOf("Trident")&&-1<t.indexOf("rv:11.0")?"IE":-1<t.indexOf("Edge")?"Edge":-1<t.indexOf("Firefox")?"Firefox":-1<t.indexOf("Chrome")?"Chrome":-1<t.indexOf("Safari")?"Safari":-1,r=function(){if("IE"!=s)return-1;var t=e.navigator.userAgent;return-1<t.indexOf("Trident")&&-1<t.indexOf("rv:11.0")?11:/MSIE 10/.test(t)?10:/MSIE 9/.test(t)?9:/MSIE 8/.test(t)?8:/MSIE 7/.test(t)?7:6}();if(r<9&&"IE"==s)throw new Error("IE browser version is too low, minimum support IE9!");"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),Number.EPSILON===f&&(Number.EPSILON=Math.pow(2,-52)),Number.isInteger===f&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t});var n={get:function(){var t,e=document.createElement("div");for(t=0;t<this.childNodes.length;t++)e.appendChild(this.childNodes[t].cloneNode(!0));return e.innerHTML},set:function(t){var e=document.createElement("div");e.innerHTML=t;var o=function(t){var e,r=document.createElementNS(u.svg,(t.tagName+"").toLowerCase()),n=t.attributes,i=m(r);for(e=0;n&&e<n.length;e++)i.attr(n[e].nodeName,t.getAttribute(n[e].nodeName));return r},r=o(e.firstChild);!function t(e,r){var n=e.firstChild;if(n&&3==n.nodeType)r.textContent=e.innerText;else for(;n;){var i=o(n);r.appendChild(i),n.firstChild&&t(n,i),n=n.nextSibling}}(e.firstChild,r),this.appendChild(r)}};"innerHTML"in SVGElement.prototype==!1&&Object.defineProperty(SVGElement.prototype,"innerHTML",n),"innerHTML"in SVGSVGElement.prototype==!1&&Object.defineProperty(SVGSVGElement.prototype,"innerHTML",n),"target"in Event.prototype==!1&&Object.defineProperty(Event.prototype,"target",{get:function(){return this.srcElement}}),"stopPropagation"in Event.prototype==!1&&(Event.prototype.stopPropagation=function(){this.cancelBubble=!0}),"preventDefault"in Event.prototype==!1&&(Event.prototype.preventDefault=function(){this.returnValue=!1});var c={timers:[],interval:13,speeds:400,timerId:null};m.animation=function(e,t,r){c.timer(function(t){e(t)},t,r)},c.timer=function(t,e,r){if("function"!=typeof t)throw new Error("tick is required!");(e="number"==typeof e?e:c.speeds)<0&&(e=-e),c.timers.push({createTime:new Date,tick:t,duration:e,callback:r}),c.start()},c.start=function(){c.timerId||(c.timerId=setInterval(c.tick,c.interval))},c.tick=function(){var t,e,r,n,i,o,u,a=c.timers;for(c.timers=[],e=c.timers.length=0;e<a.length;e++)t=(i=a[e]).createTime,r=i.tick,o=i.duration,n=i.callback,!1,1<=(u=(+new Date-t)/o)&&!0,r(u=1<u?1:u),u<1?c.timers.push(i):n&&n();c.timers.length<=0&&c.stop()},c.stop=function(){c.timerId&&(clearInterval(c.timerId),c.timerId=null)};m.color=function(t){var e=m("head").css("color",t).css("color").replace(/^rgba?\(([^)]+)\)$/,"$1").split(new RegExp("\\,"+x.whitespace));return[+e[0],+e[1],+e[2],e[3]==f?1:+e[3]]},m.getColors=function(t,e,r){if(!e)return function(t){if("number"==typeof t&&3<t){var e=[],r=0;for(r=1;r<=t;r++)e.push("rgb("+(230*Math.random(1)+20).toFixed(0)+","+(230*Math.random(1)+20).toFixed(0)+","+(230*Math.random(1)+20).toFixed(0)+")");return e}return["rgb(255,0,0)","rgb(0,255,0)","rgb(0,0,255)"]}(t);var n,i,o,u,a,c,s,f,h,p,l,d,g,v=(e[1]-e[0])/t;if(r){var m=(o=r[0],u=r[1],a=r[2],h=+o/255,p=+u/255,l=+a/255,d=Math.max(h,p,l),g=Math.min(h,p,l),d===g?c=0:d===h?c=60*(p-l)/(d-g):d===p?c=60*(l-h)/(d-g)+120:d===l&&(c=60*(h-p)/(d-g)+240),c<0&&(c+=360),0==(f=(d+g)/2)||d===g?s=0:0<f&&f<=.5?s=(d-g)/(d+g):.5<f&&(s=(d-g)/(2-d-g)),[+c.toFixed(2),+s.toFixed(2),+f.toFixed(2)]);n=m[1],i=m[2]}else n=.78,i=.4;for(var y,x,b,w,E,_,T,M,R,P=[],A=0;A<t;A++)y=v*A+e[0],x=n,b=i,_=E=w=void 0,T=(1-Math.abs(2*b-1))*x,M=T*(1-Math.abs(y/60%2-1)),R=b-T/2,0<=y&&y<60?(w=255*(T+R),E=255*(M+R),_=255*R):60<=y&&y<120?(w=255*(M+R),E=255*(T+R),_=255*R):120<=y&&y<180?(w=255*R,E=255*(T+R),_=255*(M+R)):180<=y&&y<240?(w=255*R,E=255*(M+R),_=255*(T+R)):240<=y&&y<300?(w=255*(M+R),E=255*R,_=255*(T+R)):300<=y&&y<360&&(w=255*(T+R),E=255*R,_=255*(M+R)),r=[+w.toFixed(0),+E.toFixed(0),+_.toFixed(0)],P.push("rgb("+r[0]+","+r[1]+","+r[2]+")");return P},m.loop=function(t,e){var r,n=0;for(r in t)e(t[r],r,n++);return m};var h={headers:{},timeout:3e3,context:"",request:function(t){return t},success:function(t,e){"function"==typeof e&&e(t)},error:function(t,e){"function"==typeof e&&e(t)}};o.$httpProvider=function(t){var e;for(e in t)h[e]=t[e]};var p=function(e){var t;e=h.request(e);var r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(/^\//.test(e.url)||(e.url=h.context+""+e.url),r.open(e.type,e.url,!0),r.timeout=e.timeout||h.timeout,"function"==typeof e.fileload){var n=function(t){t.lengthComputable&&e.fileload(t.loaded/t.total)};r.onprogress=n,r.upload.onprogress=n}for(t in r.onload=function(){h.success({response:r.response,status:r.status,header:r.getAllResponseHeaders()},e.success)},r.onerror=function(){h.error({type:"error"},e.error)},r.ontimeout=function(){h.error({type:"timeout"},e.error)},h.headers)r.setRequestHeader(t,h.headers[t]);for(t in e.header)r.setRequestHeader(t,e.header[t]);r.send(e.data)};m.post=function(i,o){var u=function(t,e,r,n){return p({type:"POST",url:t,success:r,error:n,timeout:o,header:i||{},data:e?JSON.stringify(e):""}),u};return u},m.get=function(n,i){var o=function(t,e,r){return p({type:"GET",url:t,success:e,error:r,timeout:i,header:n||{}}),o};return o};var l=function(t,e,r,n){return t.beginPath(),t.fillStyle=e,t.strokeStyle=e,"function"!=typeof r?t:(r(t),n)};function d(t){if(t&&t.constructor===CanvasRenderingContext2D)return t;var e=m(t);return 0<e.length?e[0].getContext("2d"):void 0}m.prototype.region=function(){var i={},t=document.createElement("canvas"),r=[0,0,0],n="r";t.setAttribute("width",this[0].offsetWidth),t.setAttribute("height",this[0].offsetHeight);var o=this,u=t.getContext("2d"),a={drawer:function(t,e){return i[t]==f&&(i[t]={r:function(){return r[0]+=1,n="g","rgb("+r[0]+","+r[1]+","+r[2]+")"},g:function(){return r[1]+=1,n="b","rgb("+r[0]+","+r[1]+","+r[2]+")"},b:function(){return r[2]+=1,n="r","rgb("+r[0]+","+r[1]+","+r[2]+")"}}[n]()),l(u,i[t],e,a)},erase:function(t){return l(u,"rgb(0,0,0)",t,a)},getRegion:function(t){var e,r=o.position(t);r.x-=o.css("border-left-width").replace("px",""),r.y-=o.css("border-top-width").replace("px","");var n=u.getImageData(r.x-.5,r.y-.5,1,1).data;for(e in i)if("rgb("+n[0]+","+n[1]+","+n[2]+")"==i[e])return[e,r.x,r.y];return f}};return a},m.prototype.painter=function(){if(0<this.length&&"CANVAS"!=this[0].nodeName&&"canvas"!=this[0].nodeName)throw new Error("painter is not function");return d(this)},m.prototype.layer=function(){if(0<this.length&&"CANVAS"!=this[0].nodeName&&"canvas"!=this[0].nodeName)throw new Error("layer is not function");var e=d(this),r=[],n={},i=this[0].clientWidth,o=this[0].clientHeight,u={painter:function(t){return n[t]&&n[t].constructor===CanvasRenderingContext2D||(r.push(document.createElement("canvas")),r[r.length-1].setAttribute("width",i),r[r.length-1].setAttribute("height",o),n[t]=r[r.length-1].getContext("2d")),n[t]},clean:function(t){return t&&(t.constructor!==CanvasRenderingContext2D&&(t=u.painter(t)),t.clearRect(0,0,i,o)),u},update:function(){if(e&&e.constructor===CanvasRenderingContext2D){var t;for(e.clearRect(0,0,i,o),e.save(),t=0;t<r.length;t++)e.drawImage(r[t],0,0,i,o,0,0,i,o);e.restore()}return u}};return u};var g=function(t,e){var r,n,i=[];for(r=0;r<4;r++)for(n=0;n<e.length/4;n++)i[4*n+r]=t[r]*e[4*n]+t[r+4]*e[4*n+1]+t[r+8]*e[4*n+2]+t[r+12]*e[4*n+3];return i},v=function(t){if(9==t.length)return t[0]*t[4]*t[8]-t[0]*t[7]*t[5]-t[3]*t[1]*t[8]+t[3]*t[7]*t[2]+t[6]*t[1]*t[5]-t[6]*t[4]*t[2];if(16==t.length)return t[0]*v([t[5],t[6],t[7],t[9],t[10],t[11],t[13],t[14],t[15]])-t[4]*v([t[1],t[2],t[3],t[9],t[10],t[11],t[13],t[14],t[15]])+t[8]*v([t[1],t[2],t[3],t[5],t[6],t[7],t[13],t[14],t[15]])-t[12]*v([t[1],t[2],t[3],t[5],t[6],t[7],t[9],t[10],t[11]]);throw new Error("Unsupported parameter!")},w=function(t){var e,r=[v([(e=t)[5],e[6],e[7],e[9],e[10],e[11],e[13],e[14],e[15]]),-v([e[4],e[6],e[7],e[8],e[10],e[11],e[12],e[14],e[15]]),v([e[4],e[5],e[7],e[8],e[8],e[11],e[12],e[13],e[15]]),-v([e[4],e[5],e[6],e[8],e[9],e[10],e[12],e[13],e[14]]),-v([e[1],e[2],e[3],e[9],e[10],e[11],e[13],e[14],e[15]]),v([e[0],e[2],e[3],e[8],e[10],e[11],e[12],e[14],e[15]]),-v([e[0],e[1],e[3],e[8],e[9],e[11],e[12],e[13],e[15]]),v([e[0],e[1],e[2],e[8],e[9],e[10],e[12],e[13],e[14]]),v([e[1],e[2],e[3],e[5],e[6],e[7],e[13],e[14],e[15]]),-v([e[0],e[2],e[3],e[4],e[6],e[7],e[12],e[14],e[15]]),v([e[0],e[1],e[3],e[4],e[5],e[7],e[12],e[13],e[15]]),-v([e[0],e[1],e[2],e[4],e[5],e[6],e[12],e[13],e[14]]),-v([e[1],e[2],e[3],e[5],e[6],e[7],e[9],e[10],e[11]]),v([e[0],e[2],e[3],e[4],e[6],e[7],e[8],e[10],e[11]]),-v([e[0],e[1],e[3],e[4],e[5],e[7],e[8],e[9],e[11]]),v([e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]])];return[r[0],r[4],r[8],r[12],r[1],r[5],r[9],r[13],r[2],r[6],r[10],r[14],r[3],r[7],r[11],r[15]]};m.Matrix4=function(t){var p=t||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],l={move:function(t,e,r,n){return p=g(function(t,e,r,n){n=n||0;var i=Math.sqrt(e*e+r*r+n*n);return[1,0,0,0,0,1,0,0,0,0,1,0,e*t/i,r*t/i,n*t/i,1]}(t,e,r,n),p),l},rotate:function(t,e,r,n,i,o,u){var a,c,s,f=function(t,e,r,n,i,o){if("number"!=typeof t||"number"!=typeof e)throw new Error("a1 and b1 is required!");if("number"!=typeof r?(r=0,n=t,i=e,o=1):"number"==typeof n&&"number"==typeof i&&"number"==typeof o||(n=t,i=e,o=r,r=e=t=0),t==n&&e==i&&r==o)throw new Error("It's not a legitimate ray!");var u=Math.sqrt((n-t)*(n-t)+(i-e)*(i-e)),a=0!=u?(i-e)/u:1,c=0!=u?(n-t)/u:0,s=(n-t)*c+(i-e)*a,f=o-r,h=Math.sqrt(s*s+f*f),p=0!=h?f/h:1,l=0!=h?s/h:0;return[[a,p*c,c*l,0,-c,a*p,a*l,0,0,-l,p,0,e*c-t*a,r*l-t*c*p-e*a*p,-t*c*l-e*a*l-r*p,1],[a,-c,0,0,p*c,p*a,-l,0,c*l,a*l,p,0,t,e,r,1]]}(e,r,n,i,o,u);return p=g(g(g(f[1],(a=t,c=Math.sin(a),[s=Math.cos(a),c,0,0,-c,s,0,0,0,0,1,0,0,0,0,1])),f[0]),p),l},scale:function(t,e,r,n,i,o){var u,a,c,s,f,h;return p=g([u=t,0,0,0,0,a=e,0,0,0,0,c=r,0,(s=(s=n)||0)-s*u,(f=(f=i)||0)-f*a,(h=(h=o)||0)-h*c,1],p),l},multiply:function(t,e){return p=e?g(p,t):g(t,p),l},inverse:function(){return p=function(t){var e,r=w(t),n=v(t),i=[];if(0==n)throw new Error("This matrix is irreversible!");for(e=0;e<16;e++)i[e]=r[e]/n;return i}(p),l},use:function(t,e,r,n){var i=g(p,[t,e,r=r||0,n=n||1]);return i[0]=i[0].toFixed(7),i[1]=i[1].toFixed(7),i[2]=i[2].toFixed(7),i},value:function(){return p}};return l},m.hermite=function(){var c={u:.5},s=function(t){if(c.MR){var e=(t-c.a)/(c.b-c.a),r=e*e;return(e*r*c.MR[0]+r*c.MR[1]+e*c.MR[2]+c.MR[3])*(c.b-c.a)}throw new Error("You shoud first set the position!")};return s.setU=function(t){if("number"!=typeof t)throw new Error("Expecting a figure!");return c.u=.5*(1-t),s},s.setP=function(t,e,r,n,i,o){if(!(t<r))throw new Error("The point position should be increamented!");c.a=t,c.b=r;var u=c.u*i,a=c.u*o;return e/=r-t,n/=r-t,c.MR=[2*e-2*n+u+a,3*n-3*e-2*u-a,u,e],s},s},m.cardinal=function(){var e,i={t:0},o=function(t){if(i.hs){for(e=-1;e+1<i.hs.x.length&&(t>i.hs.x[e+1]||-1==e&&t>=i.hs.x[e+1]);)e+=1;if(-1==e||e>=i.hs.h.length)throw new Error("Coordinate crossing!");return i.hs.h[e](t)}throw new Error("You shoud first set the position!")};return o.setU=function(t){if("number"!=typeof t)throw new Error("Expecting a figure!");return i.t=t,o},o.setP=function(t){i.hs={x:[],h:[]};var e,r,n=(t[1][1]-t[0][1])/(t[1][0]-t[0][0]);for(i.hs.x[0]=t[0][0],e=1;e<t.length;e++){if(t[e][0]<=t[e-1][0])throw new Error("The point position should be increamented!");i.hs.x[e]=t[e][0],r=e<t.length-1?(t[e+1][1]-t[e-1][1])/(t[e+1][0]-t[e-1][0]):(t[e][1]-t[e-1][1])/(t[e][0]-t[e-1][0]),i.hs.h[e-1]=m.hermite().setU(i.t).setP(t[e-1][0],t[e-1][1],t[e][0],t[e][1],n,r),n=r}return o},o},m.catmullRom=function(){var i={},o=function(t){var e=t*t,r=e*t;return[.5*(i.x[0]*r+i.x[1]*e+i.x[2]*t+i.x[3]),.5*(i.y[0]*r+i.y[1]*e+i.y[2]*t+i.y[3])]};return o.setP=function(t,e,r,n){return i.x=m.Matrix4([-1,2,-1,0,3,-5,0,2,-3,4,1,0,1,-1,0,0]).use(t[0],e[0],r[0],n[0]),i.y=m.Matrix4([-1,2,-1,0,3,-5,0,2,-3,4,1,0,1,-1,0,0]).use(t[1],e[1],r[1],n[1]),o},o};var E=function(t,e,r,n){var i=Math.cos(t),o=Math.sin(t);return[e*i-r*o,e*o+r*i,n]};m.map=function(){var d,g={c:[107,36],s:1},r=function(t,e){var r,n,i,o,u,a,c,s,f,h,p,l;return r=(360-e)/180*Math.PI,n=100*g.s,o=i=0,u=Math.cos(r),a=Math.sin(r),d=[o*a+n*u,i,o*u-n*a],d=E(t/180*Math.PI,d[0],d[1],d[2]),d=E((90-g.c[0])/180*Math.PI,d[0],d[1],d[2]),c=(90-g.c[1])/180*Math.PI,s=d[0],f=d[1],h=d[2],p=Math.cos(c),l=Math.sin(c),[-(d=[s,f*p-h*l,f*l+h*p])[0],d[1],d[2]]};return r.scale=function(t){return"number"==typeof t&&(g.s=t),r},r.center=function(t,e){return"number"==typeof t&&"number"==typeof e&&(g.c=[t,e]),r},r},m.rotate=function(t,e,r,n,i){var o=Math.cos(r),u=Math.sin(r);return[((n-t)*o-(i-e)*u+t).toFixed(7),((n-t)*u+(i-e)*o+e).toFixed(7)]},m.move=function(t,e,r,n,i){var o=Math.sqrt(t*t+e*e);return[(t*r/o+n).toFixed(7),(e*r/o+i).toFixed(7)]},m.scale=function(t,e,r,n,i){return[(r*(n-t)+t).toFixed(7),(r*(i-e)+e).toFixed(7)]},m.svg={},m.canvas={};var _=function(t,e,r,n){var i,o=r(n);if(o._p=d(t),e)for(i in e)o._p[i]=e[i];return o.painter=function(t){return o._p=d(t),o},o.config=function(t){for(i in t)o._p[i]=t[i];return o},o},T=function(u){var a={c:[0,0],r:[100,140],t:[]},r=function(t,e,r,n){e>2*Math.PI&&(e=2*Math.PI),e<2*-Math.PI&&(e=2*-Math.PI),e<0&&(t+=e,e*=-1),"number"!=typeof r&&(r=a.r[0]),"number"!=typeof n&&(n=a.r[1]);var i,o=[];return i=E(t,r,0,0),o[0]=i[0],o[1]=i[1],i=E(e,i[0],i[1],0),o[2]=i[0],o[3]=i[1],i=E(t,n,0,0),o[4]=i[0],o[5]=i[1],i=E(e,i[0],i[1],0),o[6]=i[0],o[7]=i[1],u(a.c[0],a.c[1],r,n,t,t+e,o[0]+a.c[0],o[1]+a.c[1],o[4]+a.c[0],o[5]+a.c[1],o[2]+a.c[0],o[3]+a.c[1],o[6]+a.c[0],o[7]+a.c[1],a.t,.5*(n-r))};return r.setRadius=function(t,e){return a.r=[t,e],r},r.setCenter=function(t,e){return a.c=[t,e],r},r.lineCap=function(t,e){return a.t=[t,e],r},r};m.svg.arc=function(){return T(function(t,e,r,n,i,o,u,a,c,s,f,h,p,l,d,g){var v=o-i>Math.PI?1:0,m="M"+u+" "+a;return g<0&&(g=-g),m+="A"+r+" "+r+" 0 "+v+" 1 "+f+" "+h,d[1]?m+="A"+g+" "+g+"  0 1 0 "+p+" "+l:m+="L"+p+" "+l,m+="A"+n+" "+n+" 0 "+v+" 0 "+c+" "+s,d[0]?m+="A"+g+" "+g+"  0 1 0 "+u+" "+a:m+="L"+u+" "+a,m})},m.canvas.arc=function(t,e){var v=_(t,e,T,function(t,e,r,n,i,o,u,a,c,s,f,h,p,l,d,g){return g<0&&(g=-g),v._p.beginPath(),v._p.moveTo(u,a),v._p.arc(t,e,r,i,o,!1),d[1]?v._p.arc(.5*(f+p),.5*(h+l),g,o-Math.PI,o,!0):v._p.lineTo(p,l),v._p.arc(t,e,n,o,i,!0),d[0]?v._p.arc(.5*(u+c),.5*(a+s),g,i,i-Math.PI,!0):v._p.lineTo(u,a),v._p});return v};var M=function(a){var c={s:10,t:["LR"]},n=function(t,e,r,n){var i,o=.5*c.s,u=c.t[0];switch("RL"!=c.t[0]&&"BT"!=c.t[0]||(r=-r,u={RL:"LR",BT:"TB"}[c.t[0]]),u){case"LR":i=[[t,e-o],[t+r,e-o],[t+r,e+o],[t,e+o]];break;case"TB":i=[[t+o,e],[t+o,e+r],[t-o,e+r],[t-o,e]];break;default:n=n||0,i=[m.rotate(c.t[1],c.t[2],n+c.t[0],t,e-o),m.rotate(c.t[1],c.t[2],n+c.t[0],t+r,e-o),m.rotate(c.t[1],c.t[2],n+c.t[0],t+r,e+o),m.rotate(c.t[1],c.t[2],n+c.t[0],t,e+o)]}return a(i)};return n.setSize=function(t){return c.s=t,n},n.setType=function(t,e,r){return c.t=[t,e,r],n},n};m.svg.rect=function(){return M(function(t){return"M"+t[0][0]+","+t[0][1]+" L"+t[1][0]+","+t[1][1]+" L"+t[2][0]+","+t[2][1]+" L"+t[3][0]+","+t[3][1]+" L"+t[0][0]+","+t[0][1]+" "})},m.canvas.rect=function(t,e){var r=_(t,e,M,function(t){return r._p.beginPath(),r._p.moveTo(t[0][0],t[0][1]),r._p.lineTo(t[1][0],t[1][1]),r._p.lineTo(t[2][0],t[2][1]),r._p.lineTo(t[3][0],t[3][1]),r._p.lineTo(t[0][0],t[0][1]),r._p});return r};var R=function(o){var u={d:5},a=m.hermite().setU(-1),e=function(t){for(var e,r,n=0,i="M"+t[0][0]+","+t[0][1];n<t.length-1;n++)e=0==n?0:n-1,r=n==t.length-2?t.length-1:n+2,a.setP(t[n][0],t[n][1],t[n+1][0],t[n+1][1],(t[n+1][1]-t[e][1])/(t[n+1][0]-t[e][0]),(t[r][1]-t[n][1])/(t[r][0]-t[n][0])),i=o(a,t[n][0],t[n+1][0],i,u.d);return i};return e.setPrecision=function(t){return u.d=t,e},e.setU=function(t){return a.setU(t),e},e};m.svg.line=function(){return R(function(t,e,r,n,i){for(;e<r;e+=i)n=n+" L"+e+","+t(e);return n=n+" L"+r+","+t(r)})},m.canvas.line=function(t,e){var o=_(t,e,R,function(t,e,r,n,i){for("string"==typeof n&&(o._p.beginPath(),o._p.moveTo(e,t(e)));e<r;e+=i)o._p.lineTo(e,t(e));return o._p.lineTo(r,t(r)),o._p});return o};var P=function(i){var o={p:[]},r=function(t,e,r,n){return i(t,e,r,n=n||0,o.p[0],o.p[1],o.c||"#000",o.s||16)};return r.setAlign=function(t,e){return o.p=[t,e],r},r.setSize=function(t){return o.s=t,r},r.setColor=function(t){return o.c=t,r},r};m.svg.text=function(){return P(function(t,e,r,n,i,o,u,a){"IE"!=s&&"Edge"!=s||("top"==o&&(e+=a),"middle"==o&&(e+=.5*a));var c=n?"transform='rotate("+180*n/Math.PI+","+t+","+e+")'":"";return m("<text fill="+u+' x="'+t+'" y="'+e+'" '+c+">"+r+"</text>").css({"text-anchor":{left:"start",right:"end"}[i]||"middle","dominant-baseline":{top:"text-before-edge",bottom:{Safari:"auto"}[s]||"ideographic"}[o]||{Firefox:"middle"}[s]||"central","font-size":a+"px","font-family":"sans-serif"})})},m.canvas.text=function(t,e){var c=_(t,e,P,function(t,e,r,n,i,o,u,a){return c._p.save(),c._p.beginPath(),c._p.textAlign={left:"start",right:"end"}[i]||"center",c._p.textBaseline={top:"top",bottom:"bottom"}[o]||"middle",c._p.font=a+"px sans-serif",c._p.translate(t,e),c._p.rotate(n),c._p.fillStyle=u,c._p.fillText(r,0,0),c._p.restore(),c._p});return c};var A=function(u){var a={},n=function(t,e,r,n){var i,o;if("normal"==a.t[2])i=[a.t[0],a.t[1]],o=[-a.t[0],-a.t[1]];else{if("circle"!=a.t[2])throw new Error("Illegal type!");i=[t-a.t[0],e-a.t[1]],i=(a.t[0]-t)*(a.t[0]-t)+(a.t[1]-e)*(a.t[1]-e)==(a.t[0]-r)*(a.t[0]-r)+(a.t[1]-n)*(a.t[1]-n)?[a.t[0]-t,a.t[1]-e]:[t-a.t[0],e-a.t[1]],o=[a.t[0]-r,a.t[1]-n]}return u([t,e],[r,n],m.move(i[0],i[1],a.l,t,e),m.move(o[0],o[1],a.l,r,n))};return n.setType=function(t,e,r){return r||(r="normal"),a.t=[t,e,r],n},n.setL=function(t){return a.l=t,n},n};m.svg.bezier=function(){return A(function(t,e,r,n){return"M"+t[0]+","+t[1]+" C"+r[0]+","+r[1]+" "+n[0]+","+n[1]+" "+e[0]+","+e[1]})},m.canvas.bezier=function(t,e){var i=_(t,e,A,function(t,e,r,n){return i._p.beginPath(),i._p.moveTo(t[0],t[1]),i._p.bezierCurveTo(r[0],r[1],n[0],n[1],e[0],e[1]),i._p});return i};var C=function(o){var u={d:100};if(!u.i)var a=m.catmullRom();var e=function(t){var e=1===t.length?[t[0]]:Array.apply(null,t);e.push(e[0]);var r=e.length;e.unshift(e[r-2]),e.push(e[2]);for(var n=1,i="M"+e[1][0]+" "+e[1][1]+" ";n<r;n++)i=u.i?o([e[n],e[n+1]],0,1/u.d,i):(a.setP(e[n-1],e[n],e[n+1],e[n+2]),o(a,0,1/u.d,i));return"string"==typeof i?i+=" Z":i.closePath(),i};return e.setNum=function(t){return u.d=t,e},e.noInterpolate=function(t){return u.i=t,e},e};m.svg.polygon=function(){return C(function(t,e,r,n){if("function"!=typeof t)n=n+" L"+t[1][0]+","+t[1][1];else for(;e<=1;e+=r){var i=t(e);n=n+" L"+i[0]+","+i[1]}return n})},m.canvas.polygon=function(t,e){var o=_(t,e,C,function(t,e,r,n){if("function"!=typeof t)"string"==typeof n&&(o._p.beginPath(),o._p.moveTo(t[0][0],t[0][1])),o._p.lineTo(t[1][0],t[1][1]);else{var i=t(e);for("string"==typeof n&&o._p.moveTo(i[0],i[1]);e<=1;e+=r)i=t(e),o._p.lineTo(i[0],i[1])}return o._p});return o};var I=function(t,e,r){var n=t.createShader(e);if(null==n)throw new Error("Unable to create shader!");if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error("Failed to compile shader:"+t.getShaderInfoLog(n));return n};m.prototype.webgl=function(t){var v=function(t,e){var r,n=["webgl","experimental-webgl","webkit-3d","moz-webgl"],i=null;for(r=0;r<n.length;r++){try{i=t.getContext(n[r],e)}catch(t){}if(i)break}return i}(this[0],t),a={painter:function(){return v},shader:function(t,e){return v.program=function(t,e,r){var n=I(t,t.VERTEX_SHADER,e),i=I(t,t.FRAGMENT_SHADER,r),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,i),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw new Error("Failed to link program: "+t.getProgramInfoLog(o));return t.useProgram(o),o}(v,t,e),a},buffer:function(u){var d,t,e,r,n,i=(e=u,r=(t=v).createBuffer(),n=e?t.ELEMENT_ARRAY_BUFFER:t.ARRAY_BUFFER,t.bindBuffer(n,r),r),g={write:function(t,e){var r,n,i,o;return e=e||v.STATIC_DRAW,r=v,n=t,i=e,o=u?r.ELEMENT_ARRAY_BUFFER:r.ARRAY_BUFFER,r.bufferData(o,n,i),d=t,g},use:function(t,e,r,n,i,o){var u,a,c,s,f,h,p,l=d.BYTES_PER_ELEMENT;return"string"==typeof t&&(t=v.getAttribLocation(v.program,t)),r=r||0,n=n||0,i=i||v.FLOAT,a=t,c=e,s=i,f=r*l,h=n*l,p=o,(u=v).vertexAttribPointer(a,c,s,p||!1,f||0,h||0),u.enableVertexAttribArray(a),g},close:function(){var t;return t=i,v.deleteBuffer(t),a}};return g},texture:function(t,s){s=s||v.TEXTURE_2D;var e,r,n,i,o=(r=t,n=s,i=(e=v).createTexture(),e.activeTexture(e["TEXTURE"+r]),e.bindTexture(n,i),i),f={config:function(t){return function(t,e,r){var n;for(n in r)t.texParameteri(e,t[n],t[r[n]])}(v,s,t),f},use:function(t,e,r,n){var i,o,u,a,c;return i=s,o=t,u=e,a=r,c=n,v.texImage2D(i,o,u,u,a,c),f},close:function(){var t;return t=o,v.deleteTexture(t),a}};return f}};return a};m.treeLayout=function(){var u,r,c={e:{}},o=function(){var i=[],o=0;!function t(e,r){var n;for(n=0;n<e.children.length;n++)t(u[e.children[n]],r+1);(u[e.id].left=r+.5,0==n)?(i[r]==f&&(i[r]=-.5),i[r-1]==f&&(i[r-1]=-.5),u[e.id].top=i[r]+1,i[r]+1+.5*(u[e.pid].children.length-1)-1<i[r-1]&&(u[e.id].top=i[r-1]+1-.5*(u[e.pid].children.length-1))):u[e.id].top=.5*(u[e.children[0]].top+u[e.children[n-1]].top);i[r]=u[e.id].top,u[e.id].top+.5>o&&(o=u[e.id].top+.5)}(u[r],0),c.e.drawer(u,r,o)},a=function(o){var u,t,a={},e=c.e.root(o);return u=t=c.e.id(e),a[u]={data:e,pid:null,id:u,children:[],show:!0},function t(e,r){var n,i=c.e.child(e,o);for(n=0;i&&n<i.length;n++)u=c.e.id(i[n]),a[r].children.push(u),a[u]={data:i[n],pid:r,id:u,children:[],show:!0},t(i[n],u)}(e,u),[t,a]},s=function(t){var e=a(t);return u=e[1],r=e[0],o(),s};return s.root=function(t){return c.e.root=t,s},s.child=function(t){return c.e.child=t,s},s.id=function(t){return c.e.id=t,s},s.drawer=function(t){return c.e.drawer=t,s},s.add=function(t,e,r){var n,i=a(e);for(n in i[1][i[0]].pid=t,u[t].children.push(i[0]),i[1])u[n]=i[1][n];return r||o(),s},s.delete=function(t,e){var r=u[u[t].pid].children.indexOf(t);return-1<r&&u[u[t].pid].children.splice(r,1),function t(e){var r;for(r=0;r<u[e].children.length;r++)t(u[u[e].children[r]].id);delete u[e]}(t),e||o(),s},s.toggle=function(t,e,r){var n=u[u[t].pid].children.indexOf(t);return-1<n&&"show"!=r?(u[u[t].pid].children.splice(n,1),u[t]._index=n):"hidden"!=r&&u[u[t].pid].children.splice(u[t]._index,0,t),e||o(),s},s.update=function(){return o(),s},s},m.pieLayout=function(){var a={c:[0,0],r:1,l:[20,20],v:function(t,e,r){return t},b:0,d:!1,g:2*Math.PI},c=function(t,e){var r=[];return r[0]=m.rotate(a.c[0],a.c[1],t,a.c[0]+e,a.c[1]),r[1]=m.rotate(a.c[0],a.c[1],t,a.c[0]+e+a.l[0],a.c[1]),r[2]=[r[1][0]>a.c[0]?r[1][0]- -a.l[1]:r[1][0]-a.l[1],r[1][1]],r[3]=r[1][0]>a.c[0]?"left":"right",r},s=function(t){var e,r=[],n=0,i=0;for(e in t)r.push({org:t[e],val:a.v(t[e],e,i)}),n+=r[i].val,i+=1;var o=a.b,u=0;for(i=0;i<r.length-1;i++)o=r[i].begin=o+u,r[i].p=r[i].val/n,u=r[i].deg=a.g*r[i].p*(a.d?-1:1),r[i].line=c(r[i].begin+.5*r[i].deg,"function"==typeof a.r?a.r(t[e],e,i):a.r),a.p(r[i],i);return r[i].begin=o+u,r[i].deg=a.g*(a.d?-1:1)+a.b-r[i].begin,r[i].p=r[i].val/n,r[i].line=c(r[i].begin+.5*r[i].deg,"function"==typeof a.r?a.r(t[e],e,i):a.r),a.p(r[i],i),s};return s.setValue=function(t){return a.v=t,s},s.drawer=function(t){return a.p=t,s},s.setD=function(t){return a.d=t,s},s.setBegin=function(t){return a.b=t,s},s.setRadius=function(t){return a.r=t,s},s.setDis=function(t,e){return a.l=[t,"number"==typeof e?e:t],s},s.setCenter=function(t,e){return a.c=[t,e],s},s.setDeg=function(t){return a.g=t,s},s};var S={$browser:{type:s,version:r}},L={toNode:b};m.prototype.use=function(t,n){return this[0]._component&&N[this[0]._component].beforeDestory.apply(L,[this]),this[0]._component=t,n.$watch=function(t,e){var r=n[t];Object.defineProperty(n,t,{get:function(){return r},set:function(t){e(t,r),r=t}})},"function"==typeof N[t].beforeCreate&&N[t].beforeCreate.apply(L,[this]),N[t].link.apply(L,[this,n]),this},m.prototype.destory=function(){return this[0]._component&&N[this[0]._component].beforeDestory.apply(L,[this]),this};var N={};return m.component=function(t,e){var r,n=[];for(e.constructor!=Array&&(e=[e]),r=0;r<e.length-1;r++)n[r]=S[e[r]]||f;return N[t]=e[e.length-1].apply(this,n),m},m.config=function(t,e){var r,n=[];for(e.constructor!=Array&&(e=[e]),r=0;r<e.length-1;r++)n[r]=S[e[r]]||f;var i=e[e.length-1].apply(this,n);return o[t](i),m},m.version="1.6.0next",m.author="心叶",m.email="yelloxing@gmail.com",m});